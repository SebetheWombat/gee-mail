<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        var msgNum = 0;
		var content = document.getElementById("content");
		for (var i in window.geemails){
			displayMail(window.geemails[i].date,window.geemails[i].subject,window.geemails[i].sender,window.geemails[i].body,i);
		}
		
		setInterval(function(){
			var message = getNewMessage();
			displayMail(message.date,message.subject,message.sender,message.body,msgNum);
		}, 10000);
		
		function displayMail(date,sub,send,body,id){
			var title = date + " " + sub + " " + send;
			var t = document.createElement('div');
			var msg = document.createElement('div');
			t.innerHTML = title;
			t.id = id.toString();
			msg.innerHTML = body;
			msg.style.fontFamily = "Helvetica";
			msg.style.backgroundColor = "#f1f1f1";
			msg.style.color = "#111";
			msg.id = "m" + id.toString();
			msg.className = "hide";
			content.appendChild(t);
			t.appendChild(msg);
			msgNum++;
			document.getElementById("inboxCount").innerHTML = "You have " + msgNum + " messages.";
			t.addEventListener("click", function(){
				var m = document.getElementById("m"+this.id.toString())
				m.classList.toggle("hide");
				if(this.classList.contains("read")){
					content.removeChild(this);
					document.getElementById("read").appendChild(this);
				}
				this.classList.add("read");
			});
		}
      };
    </script>
	</head>
	<body>
		<div class="container" id="main">
			<header> <h1>Gee-Mail</h1> </header>
			<div id="inboxCount"></div>
			<div id="content"></div>
			<div id = "read"></div>
		</div>
	</body>
</html>